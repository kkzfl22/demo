-- 资源
create table resc(
    id bigint,
    name varchar(50),
    res_type varchar(50),
    res_string varchar(200),
    priority integer,
    descn varchar(200)
);
alter table resc add constraint pk_resc primary key(id);
-- alter table resc alter column id bigint generated by default as identity(start with 1);

-- 角色
create table role(
    id bigint,
    name varchar(50),
    descn varchar(200)
);
alter table role add constraint pk_role primary key(id);
-- alter table role alter column id bigint generated by default as identity(start with 1);

-- 用户
create table user(
    id bigint,
    username varchar(50),
    password varchar(50),
    status integer,
    descn varchar(200)
);
alter table user add constraint pk_user primary key(id);
-- alter table user alter column id bigint generated by default as identity(start with 1);

-- 资源角色连接表
create table resc_role(
    resc_id bigint,
    role_id bigint
);
alter table resc_role add constraint pk_resc_role primary key(resc_id, role_id);
alter table resc_role add constraint fk_resc_role_resc foreign key(resc_id) references resc(id);
alter table resc_role add constraint fk_resc_role_role foreign key(role_id) references role(id);

-- 用户角色连接表
create table user_role(
    user_id bigint,
    role_id bigint
);
alter table user_role add constraint pk_user_role primary key(user_id, role_id);
alter table user_role add constraint fk_user_role_user foreign key(user_id) references user(id);
alter table user_role add constraint fk_user_role_role foreign key(role_id) references role(id);




-- 用户
insert into user(id,username,password,status,descn) values(1,'admin','admin',1,'管理员');
insert into user(id,username,password,status,descn) values(2,'user','user',1,'用户');
insert into user(id,username,password,status,descn) values(3,'liujun','liujun',1,'管理员');
insert into user(id,username,password,status,descn) values(4,'test','test',1,'用户');
insert into user(id,username,password,status,descn) values(5,'upd','upd',1,'修改权限用户');

-- 角色
insert into role(id,name,descn) values(1,'ROLE_ADMIN','管理员角色');
insert into role(id,name,descn) values(2,'ROLE_USER','用户角色');
insert into role(id,name,descn) values(3,'ROLE_UPDATE','修改角色');

-- 资源
insert into resc(id,name,res_type,res_string,priority,descn) values(1,'ROLE_USER','URL','/index.jsp',1,'');
insert into resc(id,name,res_type,res_string,priority,descn) values(2,'ROLE_ADMIN','URL','/jsp/security/testMedInvoke.jsp',2,'');
insert into resc(id,name,res_type,res_string,priority,descn) values(3,'ROLE_ADMIN','URL','/jsp/security/admin.jsp*',3,'');
insert into resc(id,name,res_type,res_string,priority,descn) values(4,'ROLE_UPDATE','URL','/jsp/security/updRole.jsp',4,'');
insert into resc(id,name,res_type,res_string,priority,descn) values(100,'ROLE_USER','URL','/**',1000,'');


-- 用户对就角色
insert into user_role(user_id,role_id) values(1,1);
insert into user_role(user_id,role_id) values(1,2);
insert into user_role(user_id,role_id) values(2,2);
insert into user_role(user_id,role_id) values(3,1);
insert into user_role(user_id,role_id) values(3,2);
insert into user_role(user_id,role_id) values(4,2);
insert into user_role(user_id,role_id) values(5,3);

-- 角色对应资源
insert into resc_role(resc_id,role_id) values(1,1);
insert into resc_role(resc_id,role_id) values(2,1);
insert into resc_role(resc_id,role_id) values(3,1);
insert into resc_role(resc_id,role_id) values(100,1);
insert into resc_role(resc_id,role_id) values(1,2);
insert into resc_role(resc_id,role_id) values(100,2);
insert into resc_role(resc_id,role_id) values(4,3);
insert into resc_role(resc_id,role_id) values(1,3);




